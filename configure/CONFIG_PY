PYMODULE ?= YES

ifneq ($(T_A),)

-include $(dir $(lastword $(MAKEFILE_LIST)))/os/CONFIG_PY.$(EPICS_HOST_ARCH).Common
-include $(dir $(lastword $(MAKEFILE_LIST)))/os/CONFIG_PY.Common.$(T_A)
-include $(dir $(lastword $(MAKEFILE_LIST)))/os/CONFIG_PY.$(EPICS_HOST_ARCH).$(T_A)

ifneq ($(PY_OK),YES)
$(error Unable to get generated python configuration)
endif

PYTHON ?= python$(PY_VER)

SHRLIB_DEPLIB_DIRS += $(PY_LIBDIRS)
PROD_DEPLIB_DIRS += $(PY_LIBDIRS)

INCLUDES += $(PY_INCDIRS:%=-I%)

ifeq ($(HAVE_NUMPY),YES)
TARGET_CPPFLAGS += -DHAVE_NUMPY
endif

LIB_SYS_LIBS += python$(PY_LD_VER)
PROD_SYS_LIBS += python$(PY_LD_VER)

PY_INSTALL_DIR = $(INSTALL_LOCATION)/python$(PY_VER)/$(T_A)

# Python loadables have no prefix (eg 'pymod.so')
# and are installed alongsize .py files
LOADABLE_SHRLIB_PREFIX =
ifneq ($(PYMODULE),NO)
INSTALL_SHRLIB = $(PY_INSTALL_DIR)
endif

endif
